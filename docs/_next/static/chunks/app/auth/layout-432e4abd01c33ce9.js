(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{8345:function(t,e,a){Promise.resolve().then(a.bind(a,5377))},5377:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return u}});var n=a(9268),r=a(6628),i=a(8268),o=a(6008),s=a(6006);function u(t){let{children:e}=t,a=(0,r.v9)(i.Hz),u=(0,o.useRouter)(),l=(0,r.I0)();return(0,s.useEffect)(()=>{a.loading&&l((0,i.Ki)())},[]),(0,s.useEffect)(()=>{a.isAuthenticated&&!a.loading&&u.push("/dashboard")},[a,u]),(0,n.jsx)("div",{children:e})}},8268:function(t,e,a){"use strict";a.d(e,{ZP:function(){return p},Ki:function(){return c},Jz:function(){return l},kS:function(){return g},Hz:function(){return h},pc:function(){return d}});var n=a(7539),r=a(2740);async function i(t,e){let a=await fetch((0,r.l)()+"login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})});if(200!==a.status){let t=await a.json();throw Error(t.error)}return await a.json()}async function o(){let t=await fetch((0,r.l)()+"whoami/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}});if(200!==t.status){let e=await t.json();throw Error(e.error)}return await t.json()}async function s(t){let e=await fetch((0,r.l)()+"signup/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(200!==e.status){let t=await e.json();throw Error(t.error)}return await e.json()}let u={isAuthenticated:!1,loading:!0,userDetails:{},status:"idle",signUpError:"",loginError:""},l=(0,n.hg)("auth/login",async(t,e)=>await i(t,e)),c=(0,n.hg)("auth/whoami",async(t,e)=>await o(t,e)),d=(0,n.hg)("auth/signup",async t=>await s(t)),f=(0,n.oM)({name:"auth",initialState:u,reducers:{logout:t=>{localStorage.clear();let e={...u};return e.loading=!1,e}},extraReducers:t=>{t.addCase(l.pending,t=>{t.status="loading",t.loginError="",localStorage.clear()}).addCase(l.fulfilled,(t,e)=>{t.status="idle",t.isAuthenticated=!0,console.log(e),t.userDetails=e.payload,localStorage.setItem("token",t.userDetails.token)}).addCase(l.rejected,(t,e)=>{t.status="idle",t.loginError=e.error.message,localStorage.clear()}).addCase(c.pending,t=>{t.loading=!0}).addCase(c.fulfilled,(t,e)=>{t.loading=!1,t.isAuthenticated=!0,t.userDetails=e.payload}).addCase(c.rejected,(t,e)=>{t.loading=!1,localStorage.clear()}).addCase(d.pending,t=>{t.status="loading",t.signUpError=""}).addCase(d.fulfilled,(t,e)=>{t.status="idle",t.isAuthenticated=!0,console.log(e),t.userDetails=e.payload,localStorage.setItem("token",t.userDetails.token)}).addCase(d.rejected,(t,e)=>{t.status="idle",t.signUpError=e.error.message})}}),{logout:g}=f.actions,h=t=>t.auth;var p=f.reducer},2740:function(t,e,a){"use strict";function n(){return"http://training.pacificescience.com/sgadidesi/project/"}function r(){return"http://training.pacificescience.com/sgadidesi/dynamicform/"}a.d(e,{j:function(){return r},l:function(){return n}})},6008:function(t,e,a){t.exports=a(3027)}},function(t){t.O(0,[899,667,488,744],function(){return t(t.s=8345)}),_N_E=t.O()}]);