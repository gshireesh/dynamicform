(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{5049:function(e,t,a){Promise.resolve().then(a.bind(a,2299))},2299:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(9268),r=a(5846),n=a.n(r),i=a(6628),o=a(8268),l=a(6008),d=a(6006);function c(){let e=(0,i.v9)(o.Hz),t=(0,l.useRouter)();(0,d.useEffect)(()=>{e.isAuthenticated&&t.push("/dashboard")},[e,t]);let[a,r]=(0,d.useState)({}),[c,u]=(0,d.useState)(""),m=(0,i.I0)(),g=(e,t)=>{a[t]=e.target.value,r({...a})};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8",children:[(0,s.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,s.jsx)(n(),{href:"/",children:(0,s.jsx)("img",{className:"mx-auto h-10 w-auto",src:"https://tailwindui.com/img/logos/mark.svg?color=indigo&shade=600",alt:"Your Company"})}),(0,s.jsx)("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Create your account"}),(""!==c||""!==e.signUpError)&&(0,s.jsx)("div",{className:"mt-10 alert alert-danger",children:c||e.signUpError})]}),(0,s.jsxs)("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,s.jsxs)("form",{className:"space-y-6",onSubmit:e=>{if(e.preventDefault(),u(""),a.password!==a.confirm_password)return u("passwords don't match");m((0,o.pc)(a))},method:"POST",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Enter your name"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:a.name,onChange:e=>g(e,"name"),className:"block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email address"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:e=>g(e,"email"),className:"block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"})}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{id:"password",name:"password",type:"password",value:a.password,autoComplete:"current-password",required:!0,onChange:e=>g(e,"password"),className:"block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Confirm Password"})}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{id:"confirm_password",name:"confirm_password",type:"password",value:a.confirm_password,onChange:e=>g(e,"confirm_password"),autoComplete:"confirm_password",required:!0,className:"block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:"idle"!==e.status,className:"btn btn-primary w-full",children:"Sign up"})})]}),(0,s.jsxs)("p",{className:"mt-10 text-center text-sm text-gray-500",children:["Have an account?"," ",(0,s.jsx)(n(),{href:"/auth/login",className:"font-semibold leading-6 text-indigo-600 hover:text-indigo-500",children:"Login"})]})]})]})})}},8268:function(e,t,a){"use strict";a.d(t,{ZP:function(){return h},Ki:function(){return c},Jz:function(){return d},kS:function(){return g},Hz:function(){return f},pc:function(){return u}});var s=a(7539),r=a(2740);async function n(e,t){let a=await fetch((0,r.l)()+"login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(200!==a.status){let e=await a.json();throw Error(e.error)}return await a.json()}async function i(){let e=await fetch((0,r.l)()+"whoami/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}});if(200!==e.status){let t=await e.json();throw Error(t.error)}return await e.json()}async function o(e){let t=await fetch((0,r.l)()+"signup/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(200!==t.status){let e=await t.json();throw Error(e.error)}return await t.json()}let l={isAuthenticated:!1,loading:!0,userDetails:{},status:"idle",signUpError:"",loginError:""},d=(0,s.hg)("auth/login",async(e,t)=>await n(e,t)),c=(0,s.hg)("auth/whoami",async(e,t)=>await i(e,t)),u=(0,s.hg)("auth/signup",async e=>await o(e)),m=(0,s.oM)({name:"auth",initialState:l,reducers:{logout:e=>{localStorage.clear();let t={...l};return t.loading=!1,t}},extraReducers:e=>{e.addCase(d.pending,e=>{e.status="loading",e.loginError="",localStorage.clear()}).addCase(d.fulfilled,(e,t)=>{e.status="idle",e.isAuthenticated=!0,console.log(t),e.userDetails=t.payload,localStorage.setItem("token",e.userDetails.token)}).addCase(d.rejected,(e,t)=>{e.status="idle",e.loginError=t.error.message,localStorage.clear()}).addCase(c.pending,e=>{e.loading=!0}).addCase(c.fulfilled,(e,t)=>{e.loading=!1,e.isAuthenticated=!0,e.userDetails=t.payload}).addCase(c.rejected,(e,t)=>{e.loading=!1,localStorage.clear()}).addCase(u.pending,e=>{e.status="loading",e.signUpError=""}).addCase(u.fulfilled,(e,t)=>{e.status="idle",e.isAuthenticated=!0,console.log(t),e.userDetails=t.payload,localStorage.setItem("token",e.userDetails.token)}).addCase(u.rejected,(e,t)=>{e.status="idle",e.signUpError=t.error.message})}}),{logout:g}=m.actions,f=e=>e.auth;var h=m.reducer},2740:function(e,t,a){"use strict";function s(){return"http://training.pacificescience.com/sgadidesi/project/"}function r(){return"http://training.pacificescience.com/sgadidesi/dynamicform/"}a.d(t,{j:function(){return r},l:function(){return s}})},6008:function(e,t,a){e.exports=a(3027)}},function(e){e.O(0,[899,846,667,488,744],function(){return e(e.s=5049)}),_N_E=e.O()}]);